<ResourceDictionary xmlns="https://github.com/avaloniaui"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                    xmlns:ae="using:AvaloniaEdit"
                    xmlns:search="using:AvaloniaEdit.Search"
                    x:ClassModifier="internal">

  <Design.PreviewWith>
    <Border Padding="20">
      <search:SearchPanel />
    </Border>
  </Design.PreviewWith>

  <StreamGeometry x:Key="ChevronRightIconPath">m384 780-15-15 189-189-189-189 15-15 204 204-204 204Z</StreamGeometry>
  <StreamGeometry x:Key="CaseSensitiveIconPath">m186 768 140-380h30l143 380h-32l-40-113H257l-40 113h-31Zm80-139h151l-75-209h-1l-75 209Zm398 148q-40 0-62.5-21.5T579 697q0-41 27-65.5t74-24.5q18 0 39.5 5t32.5 11v-24q0-39-20-60t-56-21q-20 0-35.5 6T605 544l-17-19q20-16 42.5-23.5T677 494q50 0 75 27.5t25 81.5v164h-26v-39h-4q-17 27-36 38t-47 11Zm-2-26q40 0 64.5-29.5T751 646q-13-8-29.5-12.5T684 629q-35 0-56.5 18.5T606 696q0 26 15 40.5t41 14.5Z</StreamGeometry>
  <StreamGeometry x:Key="CompleteWordIconPath">M124 764V650h20v94h672v-94h20v114H124Zm266.903-93v-39H387q-17 27-36 38t-46.737 11q-38.789 0-62.026-21.695Q219 637.611 219 601q0-41 27-65.5t73-24.5q18 0 39.5 5t33.5 11v-24q0-39-19.5-60T318 422q-21 0-37 6t-36 20l-17-19q20-16 42.5-23.5t47.84-7.5q49.66 0 74.16 27.284 24.5 27.283 24.5 81.974V671h-26.097ZM324 533q-34 0-56 18.5T246 599q0 27 15.667 41.5Q277.333 655 303 655q40 0 64-29.706t24-75.576Q378 542 361.5 537.5T324 533Zm197 139V285h25v136.182L543 460h2q15-23 37.083-34t49.189-11Q679 415 707 450.5q28 35.5 28 98.5 0 61-28.073 96.5-28.072 35.5-76.53 35.5Q603 681 580 669t-35-33h-2v36h-22Zm108-229q-36 0-61 30.159t-25 76.523Q543 596 568 626.5t61 30.5q36 0 57.5-29t21.5-78q0-49-21.5-78T629 443Z</StreamGeometry>
  <StreamGeometry x:Key="RegularExpressionIconPath">M251 817q-49-48-76.5-109.5T147 577q0-69 27-131.5T251 335l16 14q-48 44-74 103t-26 124q0 64 26 122.5T266 803l-15 14Zm121-27q-14 0-24-10t-10-24q0-14 10-24t24-10q14 0 24 10t10 24q0 14-10 24t-24 10Zm158-192V496l-88 51-10-16 88-51-88-51 10-16 88 51V362h20v102l88-51 10 16-88 51 88 51-10 16-88-51v102h-20Zm178 219-15-14q47-44 73-103t26-124q0-65-25.5-123.5T693 349l15-14q49 49 76.5 111T812 577q0 69-27.5 131.5T708 817Z</StreamGeometry>
  <StreamGeometry x:Key="FindPreviousIconPath">M470 824V367L247 590l-15-14 248-248 248 248-15 14-223-223v457h-20Z</StreamGeometry>
  <StreamGeometry x:Key="FindNextIconPath">M480 824 232 576l15-14 223 223V328h20v457l223-223 15 14-248 248Z</StreamGeometry>
  <StreamGeometry x:Key="CloseIconPath">m291 780-15-15 189-189-189-189 15-15 189 189 189-189 15 15-189 189 189 189-15 15-189-189-189 189Z</StreamGeometry>
  <StreamGeometry x:Key="ReplaceNextIconPath">M3.221 3.739L5.482 6.008L7.7 3.784L7 3.084L5.988 4.091L5.98 2.491C5.97909 2.35567 6.03068 2.22525 6.12392 2.12716C6.21716 2.02908 6.3448 1.97095 6.48 1.965H8V1H6.48C6.28496 1.00026 6.09189 1.03902 5.91186 1.11405C5.73183 1.18908 5.56838 1.29892 5.43088 1.43725C5.29338 1.57558 5.18455 1.73969 5.11061 1.92018C5.03667 2.10066 4.99908 2.29396 5 2.489V4.1L3.927 3.033L3.221 3.739ZM9.89014 5.53277H9.90141C10.0836 5.84426 10.3521 6 10.707 6C11.0995 6 11.4131 5.83236 11.6479 5.49708C11.8826 5.1618 12 4.71728 12 4.16353C12 3.65304 11.8995 3.2507 11.6986 2.95652C11.4977 2.66234 11.2113 2.51525 10.8394 2.51525C10.4338 2.51525 10.1211 2.70885 9.90141 3.09604H9.89014V1H9V5.91888H9.89014V5.53277ZM9.87606 4.47177V4.13108C9.87606 3.88449 9.93427 3.6844 10.0507 3.53082C10.169 3.37724 10.3174 3.30045 10.4958 3.30045C10.6854 3.30045 10.831 3.37833 10.9324 3.53407C11.0357 3.68765 11.0873 3.9018 11.0873 4.17651C11.0873 4.50746 11.031 4.76379 10.9183 4.94549C10.8075 5.12503 10.6507 5.2148 10.4479 5.2148C10.2808 5.2148 10.1437 5.14449 10.0366 5.00389C9.92958 4.86329 9.87606 4.68592 9.87606 4.47177ZM9 12.7691C8.74433 12.923 8.37515 13 7.89247 13C7.32855 13 6.87216 12.8225 6.5233 12.4674C6.17443 12.1124 6 11.6543 6 11.0931C6 10.4451 6.18638 9.93484 6.55914 9.5624C6.93429 9.18747 7.43489 9.00001 8.06093 9.00001C8.49343 9.00001 8.80645 9.0596 9 9.17878V10.1769C8.76344 9.99319 8.4994 9.90132 8.20789 9.90132C7.88292 9.90132 7.62485 10.0006 7.43369 10.1993C7.24492 10.3954 7.15054 10.6673 7.15054 11.0149C7.15054 11.3526 7.24134 11.6183 7.42294 11.8119C7.60454 12.0031 7.85424 12.0987 8.17204 12.0987C8.454 12.0987 8.72999 12.0068 9 11.8231V12.7691ZM4 7L3 8V14L4 15H11L12 14V8L11 7H4ZM4 8H5H10H11V9V13V14H10H5H4V13V9V8Z</StreamGeometry>
  <StreamGeometry x:Key="ReplaceAllIconPath">M11.6009 2.67683C11.7474 2.36708 11.9559 2.2122 12.2263 2.2122C12.4742 2.2122 12.6651 2.32987 12.7991 2.56522C12.933 2.80056 13 3.12243 13 3.53082C13 3.97383 12.9218 4.32944 12.7653 4.59766C12.6088 4.86589 12.3997 5 12.138 5C11.9014 5 11.7224 4.87541 11.6009 4.62622H11.5934V4.93511H11V1H11.5934V2.67683H11.6009ZM11.584 3.77742C11.584 3.94873 11.6197 4.09063 11.6911 4.20311C11.7624 4.3156 11.8538 4.37184 11.9653 4.37184C12.1005 4.37184 12.205 4.30002 12.2789 4.15639C12.354 4.01103 12.3915 3.80597 12.3915 3.54121C12.3915 3.32144 12.3571 3.15012 12.2883 3.02726C12.2207 2.90266 12.1236 2.84036 11.9972 2.84036C11.8782 2.84036 11.7793 2.9018 11.7005 3.02466C11.6228 3.14752 11.584 3.30759 11.584 3.50487V3.77742ZM4.11969 7.695L2 5.56781L2.66188 4.90594L3.66781 5.90625V4.39594C3.66695 4.21309 3.70219 4.03187 3.7715 3.86266C3.84082 3.69346 3.94286 3.53961 4.07176 3.40992C4.20066 3.28023 4.3539 3.17727 4.52268 3.10692C4.69146 3.03658 4.87246 3.00024 5.05531 3H7.39906V3.90469H5.05531C4.92856 3.91026 4.8089 3.96476 4.72149 4.05672C4.63408 4.14868 4.58571 4.27094 4.58656 4.39781L4.59406 5.89781L5.54281 4.95375L6.19906 5.61L4.11969 7.695ZM9.3556 4.93017H10V3.22067C10 2.40689 9.68534 2 9.05603 2C8.92098 2 8.77083 2.02421 8.6056 2.07263C8.44181 2.12104 8.3125 2.17691 8.21767 2.24022V2.90503C8.45474 2.70205 8.70474 2.60056 8.96767 2.60056C9.22917 2.60056 9.35991 2.75698 9.35991 3.06983L8.76078 3.17318C8.25359 3.25885 8 3.57914 8 4.13408C8 4.39665 8.06106 4.60708 8.18319 4.76536C8.30675 4.92179 8.47557 5 8.68966 5C8.97989 5 9.19899 4.83985 9.34698 4.51955H9.3556V4.93017ZM9.35991 3.57542V3.76816C9.35991 3.9432 9.31968 4.08845 9.23922 4.20391C9.15876 4.3175 9.0546 4.3743 8.92672 4.3743C8.83477 4.3743 8.76149 4.34264 8.7069 4.27933C8.65374 4.21415 8.62716 4.13128 8.62716 4.03073C8.62716 3.80912 8.73779 3.6797 8.95905 3.64246L9.35991 3.57542ZM7 12.9302H6.3556V12.5196H6.34698C6.19899 12.8399 5.97989 13 5.68966 13C5.47557 13 5.30675 12.9218 5.18319 12.7654C5.06106 12.6071 5 12.3966 5 12.1341C5 11.5791 5.25359 11.2588 5.76078 11.1732L6.35991 11.0698C6.35991 10.757 6.22917 10.6006 5.96767 10.6006C5.70474 10.6006 5.45474 10.702 5.21767 10.905V10.2402C5.3125 10.1769 5.44181 10.121 5.6056 10.0726C5.77083 10.0242 5.92098 10 6.05603 10C6.68534 10 7 10.4069 7 11.2207V12.9302ZM6.35991 11.7682V11.5754L5.95905 11.6425C5.73779 11.6797 5.62716 11.8091 5.62716 12.0307C5.62716 12.1313 5.65374 12.2142 5.7069 12.2793C5.76149 12.3426 5.83477 12.3743 5.92672 12.3743C6.0546 12.3743 6.15876 12.3175 6.23922 12.2039C6.31968 12.0885 6.35991 11.9432 6.35991 11.7682ZM9.26165 13C9.58343 13 9.82955 12.9423 10 12.8268V12.1173C9.81999 12.2551 9.636 12.324 9.44803 12.324C9.23616 12.324 9.06969 12.2523 8.94863 12.1089C8.82756 11.9637 8.76702 11.7644 8.76702 11.5112C8.76702 11.2505 8.82995 11.0466 8.95579 10.8994C9.08323 10.7505 9.25528 10.676 9.47192 10.676C9.66627 10.676 9.84229 10.7449 10 10.8827V10.1341C9.87097 10.0447 9.66229 10 9.37395 10C8.95659 10 8.62286 10.1406 8.37276 10.4218C8.12425 10.7011 8 11.0838 8 11.5698C8 11.9907 8.11629 12.3343 8.34887 12.6006C8.58144 12.8669 8.8857 13 9.26165 13ZM2 9L3 8H12L13 9V14L12 15H3L2 14V9ZM3 9V14H12V9H3ZM6 7L7 6H14L15 7V12L14 13V12V7H7H6Z</StreamGeometry>

  <ControlTheme x:Key="SearchPanelExpanderToggle" TargetType="ToggleButton"
                BasedOn="{StaticResource {x:Type ToggleButton}}">
    <Setter Property="Template">
      <ControlTemplate>
        <Border Background="Transparent" Padding="5">
          <Path Data="{StaticResource ChevronRightIconPath}"
                Stretch="Uniform"
                VerticalAlignment="Center"
                HorizontalAlignment="Center"
                Height="13"
                Fill="{TemplateBinding Foreground}"
                Stroke="{TemplateBinding Foreground}"
                StrokeThickness="1" />
        </Border>
      </ControlTemplate>
    </Setter>
    <Style Selector="^:checked /template/ Path">
      <Setter Property="RenderTransform">
        <TransformGroup>
          <RotateTransform Angle="90" />
          <TranslateTransform X="-2" />
        </TransformGroup>
      </Setter>
    </Style>
  </ControlTheme>

  <ControlTheme x:Key="SearchPanelTextBoxButton" TargetType="ToggleButton"
                BasedOn="{StaticResource {x:Type ToggleButton}}">
    <Setter Property="Padding" Value="4"></Setter>
    <Setter Property="MinWidth" Value="22"></Setter>
    <Setter Property="MinHeight" Value="20"></Setter>
  </ControlTheme>

  <ControlTheme x:Key="{x:Type search:SearchPanel}" TargetType="search:SearchPanel">
    <Setter Property="BorderThickness" Value="1 0 1 1" />
    <Setter Property="CornerRadius" Value="0 0 4 4" />
    <Setter Property="BorderBrush" Value="{DynamicResource SearchPanelBorderBrush}" />
    <Setter Property="Background" Value="{DynamicResource SearchPanelBackgroundBrush}" />
    <Setter Property="Focusable" Value="True" />
    <Setter Property="Margin" Value="0 0 18 0" />
    <Setter Property="FontSize" Value="{DynamicResource SearchPanelFontSize}" />
    <Setter Property="FontFamily" Value="{DynamicResource SearchPanelFontFamily}" />
    <Setter Property="Template">
      <ControlTemplate>
        <Border Name="PART_Border"
                BorderThickness="{TemplateBinding BorderThickness}"
                CornerRadius="{TemplateBinding CornerRadius}"
                BorderBrush="{TemplateBinding BorderBrush}"
                Background="{TemplateBinding Background}"
                HorizontalAlignment="Right"
                VerticalAlignment="Top"
                Padding="10">
          <Grid ColumnDefinitions="Auto,Auto,Auto"
                RowDefinitions="Auto,Auto,Auto">
            <ToggleButton Name="Expander"
                          Theme="{StaticResource SearchPanelExpanderToggle}"
                          VerticalAlignment="Center"
                          IsVisible="{Binding !TextEditor.IsReadOnly, RelativeSource={RelativeSource TemplatedParent}}"
                          IsChecked="{Binding IsReplaceMode, Mode=TwoWay, RelativeSource={RelativeSource TemplatedParent}}"
                          Grid.Column="0"
                          Grid.Row="0"
                          Width="16"
                          Margin="0, 0, 5, 0">
              <ToolTip.Tip>
                <TextBlock Text="{x:Static ae:SR.SearchToggleReplace}" />
              </ToolTip.Tip>
            </ToggleButton>
            <StackPanel Orientation="Horizontal"
                        Grid.Column="2"
                        Grid.Row="0">
              <TextBox Watermark="{x:Static ae:SR.SearchLabel}"
                       Name="PART_searchTextBox"
                       Grid.Column="1"
                       Grid.Row="0"
                       Width="265"
                       Margin="0,0,0,0"
                       Text="{Binding SearchPattern, RelativeSource={RelativeSource TemplatedParent}}">
                <TextBox.InnerRightContent>
                  <StackPanel Orientation="Horizontal">
                    <ToggleButton Theme="{StaticResource SearchPanelTextBoxButton}"
                                  IsChecked="{Binding $parent[search:SearchPanel].MatchCase, Mode=TwoWay}"
                                  ToolTip.Tip="{x:Static ae:SR.SearchMatchCaseText}"
                                  VerticalAlignment="Center">
                      <Path Data="{StaticResource CaseSensitiveIconPath}"
                            Stretch="UniformToFill"
                            HorizontalAlignment="Center"
                            VerticalAlignment="Center"
                            Width="12"
                            Fill="{Binding $parent[ToggleButton].Foreground}"
                            Stroke="{Binding $parent[ToggleButton].Foreground}"
                            StrokeThickness="1" />
                    </ToggleButton>
                    <ToggleButton Theme="{StaticResource SearchPanelTextBoxButton}"
                                  IsChecked="{Binding $parent[search:SearchPanel].WholeWords, Mode=TwoWay}"
                                  ToolTip.Tip="{x:Static ae:SR.SearchMatchWholeWordsText}"
                                  Margin="3,0,0,0"
                                  VerticalAlignment="Center">
                      <Path Data="{StaticResource CompleteWordIconPath}"
                            Stretch="Uniform"
                            HorizontalAlignment="Center"
                            VerticalAlignment="Center"
                            Width="14"
                            Fill="{Binding $parent[ToggleButton].Foreground}"
                            Stroke="{Binding $parent[ToggleButton].Foreground}"
                            StrokeThickness="1" />
                    </ToggleButton>
                    <ToggleButton Theme="{StaticResource SearchPanelTextBoxButton}"
                                  IsChecked="{Binding $parent[search:SearchPanel].UseRegex, Mode=TwoWay}"
                                  ToolTip.Tip="{x:Static ae:SR.SearchUseRegexText}"
                                  Margin="3,0,5,0"
                                  VerticalAlignment="Center">
                      <Path Data="{StaticResource RegularExpressionIconPath}"
                            Stretch="Uniform"
                            HorizontalAlignment="Center"
                            VerticalAlignment="Center"
                            Width="12"
                            Fill="{Binding $parent[ToggleButton].Foreground}"
                            Stroke="{Binding $parent[ToggleButton].Foreground}"
                            StrokeThickness="1" />
                    </ToggleButton>
                  </StackPanel>
                </TextBox.InnerRightContent>
              </TextBox>
              <Button Margin="5,0,0,0"
                      MinWidth="34"
                      VerticalAlignment="Stretch"
                      Command="{x:Static search:SearchCommands.FindPrevious}">
                <ToolTip.Tip>
                  <TextBlock Text="{x:Static ae:SR.SearchFindPreviousText}" />
                </ToolTip.Tip>
                <Path Data="{StaticResource FindPreviousIconPath}"
                      Stretch="Uniform"
                      HorizontalAlignment="Center"
                      VerticalAlignment="Center"
                      Width="16"
                      Fill="{Binding $parent[Button].Foreground}"
                      Stroke="{Binding $parent[Button].Foreground}"
                      StrokeThickness="1" />
              </Button>
              <Button Margin="3,0,0,0"
                      VerticalAlignment="Stretch"
                      MinWidth="34"
                      Command="{x:Static search:SearchCommands.FindNext}">
                <ToolTip.Tip>
                  <TextBlock Text="{x:Static ae:SR.SearchFindNextText}" />
                </ToolTip.Tip>
                <Path Data="{StaticResource FindNextIconPath}"
                      HorizontalAlignment="Center"
                      VerticalAlignment="Center"
                      Stretch="Uniform"
                      Width="16"
                      Fill="{Binding $parent[Button].Foreground}"
                      Stroke="{Binding $parent[Button].Foreground}"
                      StrokeThickness="1" />
              </Button>
              <Button Margin="3,0,0,0"
                      VerticalAlignment="Stretch"
                      MinWidth="34"
                      Command="{x:Static search:SearchCommands.CloseSearchPanel}"
                      Focusable="True">
                <Path Data="{StaticResource CloseIconPath}"
                      HorizontalAlignment="Center"
                      VerticalAlignment="Center"
                      Stretch="Uniform"
                      Width="12"
                      Fill="{Binding $parent[ToggleButton].Foreground}"
                      Stroke="{Binding $parent[ToggleButton].Foreground}"
                      StrokeThickness="1" />
              </Button>
            </StackPanel>
            <StackPanel Name="ReplaceButtons"
                        IsVisible="{Binding #Expander.IsChecked}"
                        Orientation="Horizontal"
                        Margin="0 5 0 0 "
                        Grid.Column="2"
                        Grid.Row="1">
              <TextBox Name="ReplaceBox" Watermark="{x:Static ae:SR.ReplaceLabel}"
                       IsVisible="{Binding IsReplaceMode, RelativeSource={RelativeSource TemplatedParent}}"
                       Grid.Column="1"
                       Grid.Row="1"
                       Width="265"
                       Margin="0 0 0 0"
                       Text="{Binding ReplacePattern, RelativeSource={RelativeSource TemplatedParent}}" />
              <Button Margin="5, 0, 0, 0"
                      VerticalAlignment="Stretch"
                      MinWidth="34"
                      Command="{x:Static search:SearchCommands.ReplaceNext}">
                <ToolTip.Tip>
                  <TextBlock Text="{x:Static ae:SR.SearchReplaceNext}" />
                </ToolTip.Tip>
                <Path Data="{StaticResource ReplaceNextIconPath}"
                      HorizontalAlignment="Center"
                      VerticalAlignment="Center"
                      Stretch="Uniform"
                      Width="12"
                      Fill="{Binding $parent[Button].Foreground}"
                      StrokeThickness="1" />
              </Button>
              <Button Margin="3, 0, 0, 0"
                      VerticalAlignment="Stretch"
                      MinWidth="34"
                      Command="{x:Static search:SearchCommands.ReplaceAll}">
                <ToolTip.Tip>
                  <TextBlock Text="{x:Static ae:SR.SearchReplaceAll}" />
                </ToolTip.Tip>
                <Path Data="{StaticResource ReplaceAllIconPath}"
                      HorizontalAlignment="Center"
                      VerticalAlignment="Center"
                      Stretch="Uniform"
                      Width="18"
                      Fill="{Binding $parent[Button].Foreground}" />
              </Button>
            </StackPanel>
            <StackPanel Name="PART_MessageView"
                        IsVisible="False"
                        Orientation="Horizontal"
                        Margin="0 5 0 0 "
                        Grid.Column="2"
                        Grid.Row="2">
              <TextBlock Name="PART_MessageContent"
                         FontSize="11" />
            </StackPanel>
          </Grid>
        </Border>
      </ControlTemplate>
    </Setter>

    <Style Selector="^/template/ Button">
      <Setter Property="BorderThickness" Value="0" />
    </Style>

  </ControlTheme>
</ResourceDictionary>